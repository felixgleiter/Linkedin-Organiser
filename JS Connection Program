//CREATE TABLE connections (id INTEGER, first_name TEXT, last_name TEXT, email_address TEXT, company TEXT, position TEXT, connected_on TEXT, tags TEXT);

// Converting the CSV file into an SQL table

//SET count = 1
//while count <= 5000:
//INSERT INTO connections (id, first_name, last_name, email_address, company, position, connected_on, tags) VALUES (count, 'fn', 'ln', 'ea', 'com', 'pos', 'cn', 'ta');
//count += 1

// Alternative JS object method for data input

let daniel_blattler = {firstname: 'Daniel ', surname: 'Blattler', emailaddress: '', company: 'blattler', position: 'managing director', connectedon: '', tags: ''};
let nathalie_breuer = {firstname: 'Nathalie ', surname: 'Breuer', emailaddress: '', company: 'blattler', position: 'project manager', connectedon: '', tags: ''};
let mrinal_madina = {firstname: 'Mrinal ', surname: 'Madina', emailaddress: '', company: 'blattler', position: 'sales director', connectedon: '', tags: ''};
let david_keene = {firstname: 'David ', surname: 'Keene', emailaddress: '', company: 'blattler', position: 'client relations', connectedon: '', tags: ''};
let stephan_hammes = {firstname: 'Stephan ', surname: 'Hammes', emailaddress: '', company: 'blattler', position: 'creative director', connectedon: '', tags: ''};
let nina_schu = {firstname: 'Nina ', surname: 'Schu', emailaddress: '', company: 'blattler', position: 'project manager', connectedon: '', tags: ''};
let peter_blenkharn = {firstname: 'Peter ', surname: 'Blenkharn', emailaddress: '', company: 'inside the box', position: 'lead partner', connectedon: '', tags: ''};
let anthony_howgego = {firstname: 'Anthony ', surname: 'Howgego', emailaddress: '', company: 'inside the box', position: 'lead developer', connectedon: '', tags: ''};
//let  = {firstname: '', surname: '', emailaddress: '', company: '', position: '', connectedon: '', tags: ''};
let blattler = [daniel_blattler, nathalie_breuer, mrinal_madina, david_keene, stephan_hammes, nina_schu];
let inside_the_box = [peter_blenkharn, anthony_howgego];
let managing_directors = [daniel_blattler];
let project_managers = [nathalie_breuer, nina_schu];
let sales_directors = [mrinal_madina];
let client_relations = [david_keene];
let creative_directors = [stephan_hammes];
let lead_partners = [peter_blenkharn];
let lead_developers = [anthony_howgego];
let Companies = [blattler, inside_the_box];
let Positions = [managing_directors, project_managers, sales_directors, client_relations, creative_directors, lead_partners, lead_developers];
  
// Basic Query for the SQL table

let Query = () => {
  
  console.log("Hello! Please type 'empty' where any value is unknown. Also please use '_' for spaces.")
  
  prompt("Company: ").toLowerCase();
  let Company = prompt("Company: ").toLowerCase();
  
  for (let companiesIndex = 0; companiesIndex < Companies.length; companiesIndex++) {
    
    let c = Companies[companiesIndex];
    
    if (Company === c) {
    
      prompt("Position: ").toLowerCase();
      let Position = prompt("Position: ").toLowerCase();
    
      for (let positionsIndex = 0; positionsIndex < Positions.length; positionsIndex++) {
        
        let p = Positions[positionsIndex];
        
        if (Position === p) { 
          
          let CompanyPosition = (c, p) => 
            {c.filter((name) => p.includes(name))};
          
          prompt("Surname: ").toLowerCase();
          let Surname = prompt("Surname: ").toLowerCase();
          
          for (let companyPositionIndex = 0; companyPositionIndex < CompanyPosition.length; companyPositionIndex++) {
            
            let cp = CompanyPosition(c, p)[companyPositionIndex];
            
            if (Surname === cp['surname'].toLowerCase()) 
              {console.log(cp['firstname'] + cp['surname'])}
              
            else if (Surname === null) 
              {console.log(cp['firstname'] + cp['surname'])}
          }
        }
        
        else if (Position === null) {
        
          prompt("Surname: ").toLowerCase();
          let Surname = prompt("Surname: ").toLowerCase();
          
          for (let companyIndex = 0; companyIndex < c.length; companyIndex++) {
        
            if (Surname === c[companyIndex]['surname'].toLowerCase()) 
              {console.log(c[companyIndex]['firstname'] + c[companyIndex]['surname'])}
              
            else if (Surname === null) 
              {console.log(c[companyIndex]['firstname'] + c[companyIndex]['surname'])}
          }
        }
      }
      
    else if (Company === null) {
    
      prompt("Position: ").toLowerCase();
      let Position = prompt("Position: ").toLowerCase();
      
      for (let positionIndex = 0; positionIndex < Positions.length; positionIndex++) { //This leads to 'Surname' being requested 6 times after 'empty' x2!
        
        let p = Positions[positionIndex];
        
        if (Position === p) {
        
          prompt("Surname: ").toLowerCase();
          let Surname = prompt("Surname: ").toLowerCase();
          
          for key in p:
        
            if (Surname === p[key].toLowerCase()) 
              {console.log(key + p[key])}
              
            else if (Surname === null) 
              {console.log(key + p[key])}
        }
              
        else if (Position === null) {
        
          prompt("Surname: ").toLowerCase();
          let Surname = prompt("Surname: ").toLowerCase();
          
          for key in p:
          
            if (Surname === p[key].toLowerCase()) 
              {console.log(key + p[key])}
            
            else if (Surname === null) 
              {console.log("I can't help you if you don't give me any information.")}
        }
      }
    }
    //elif eval(Company) != c and eval(Company) != empty: //Doesn't work!
      //return "I'm afraid I don't know that company. Please restart and try again."
}

Query()
