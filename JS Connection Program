//CREATE TABLE connections (id INTEGER, first_name TEXT, last_name TEXT, email_address TEXT, company TEXT, position TEXT, connected_on TEXT, tags TEXT);

// Converting the CSV file into an SQL table

//SET count = 1
//while count <= 5000:
//INSERT INTO connections (id, first_name, last_name, email_address, company, position, connected_on, tags) VALUES (count, 'fn', 'ln', 'ea', 'com', 'pos', 'cn', 'ta');
//count += 1

// Data Lists for Companies, Positions etc.

const blattler = {'Daniel ' : 'Blattler', 'Nathalie ' : 'Breuer', 'Mrinal ' : 'Madina', 'David ' : 'Keene', 'Stephan ' : 'Hammes', 'Nina ' : 'Schu'}
const inside_the_box = {'Peter ' : 'Blenkharn', 'Anthony ' : 'Howgego'}
const Companies = [blattler, inside_the_box]
const managing_director = {'Daniel ' : 'Blattler'}
const lead_partner = {'Peter ' : 'Blenkharn'}
const creative_director = {'Stephan ' : 'Hammes'}
const lead_developer = {'Anthony ' : 'Howgego'}
const sales_director = {'Mrinal ' : 'Madina'}
const project_manager = {'Nathalie ' : 'Breuer', 'Nina ' : 'Schu'}
const client_relations = {'David ' : 'Keene'} //Two identical keys means only one value is returned!
const Positions = [managing_director, lead_partner, creative_director, lead_developer, sales_director, project_manager, client_relations]
  
// Basic Query for the SQL table

let Query = () => {
  
  console.log("Hello! Please type 'empty' where any value is unknown. Also please use '_' for spaces.")
  
  prompt("Company: ").toLowerCase();
  var Company = prompt("Company: ").toLowerCase();
  
  for (let companyIndex = 0; companyIndex < Companies.length; companyIndex++) {
    
    let c = Companies[companyIndex];
    
    if eval(Company) === c { 
      let Position = prompt("Position: ").toLowerCase();
    
      for (let positionIndex = 0; positionIndex < Positions.length; positionIndex++) {
        
        let p = Positions[positionIndex];
        
        if eval(Position) === p { 
          let Surname = prompt("Surname: ").toLowerCase();
          
          for key in c and p:
      
            if Surname === c[key].toLowerCase() 
              {console.log(key + c[key])}
              
            else if Surname === null 
              {console.log(key + c[key])}
        }
        
        else if eval(Position) === null {
          let Surname = prompt("Surname: ").toLowerCase();
          
          for key in c:
        
            if Surname === c[key].toLowerCase() 
              {console.log(key + c[key])}
              
            else if Surname === null 
              {console.log(key + c[key])}
        }
      }
      
    else if eval(Company) === null {
      let Position = prompt("Position: ").toLowerCase();
      
      for (let positionIndex = 0; positionIndex < Positions.length; positionIndex++) { //This leads to 'Surname' being requested 6 times after 'empty' x2!
        
        let p = Positions[positionIndex];
        
        if eval(Position) === p {
          let Surname = prompt("Surname: ").toLowerCase();
          
          for key in p:
        
            if Surname === p[key].toLowerCase() 
              {console.log(key + p[key])}
              
            else if Surname === null 
              {console.log(key + p[key])}
        }
              
        else if eval(Position) === null {
          let Surname = prompt("Surname: ").toLowerCase();
          
          for key in p:
          
            if Surname === p[key].toLowerCase() 
              {console.log(key + p[key])}
            
            else if Surname === null 
              {console.log("I can't help you if you don't give me any information.")}
        }
      }
    }
    //elif eval(Company) != c and eval(Company) != empty: //Doesn't work!
      //return "I'm afraid I don't know that company. Please restart and try again."
}

Query()

